FROM rust:1.58-slim-buster as builder

WORKDIR /usr/src/balena-rust-hello-world

COPY . .

RUN cargo install --path .

FROM balenalib/%%BALENA_MACHINE_NAME%%-alpine:3.14

COPY --from=builder /usr/local/cargo/bin/balena-rust-hello-world /usr/local/bin/balena-rust-hello-world

CMD [ "balena-rust-hello-world" ]